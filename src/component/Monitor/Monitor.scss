$ease-out-quint:cubic-bezier(0.230, 1.000, 0.320, 1.000);
$ease-in-quint:cubic-bezier(0.755, 0.050, 0.855, 0.060);

$terminal-green: #49e18c;
$terminal-red: #8b281d;
$terminal-pink: #be2ba9;

$font--terminal: 1rem Inconsolata, monospace;

.monitor {
  position: relative;
  font: 1rem Inconsolata, monospace;
  border-radius: 3px;
  box-sizing: border-box;
  height: 100%;
  display: grid;
  grid-template-columns: 1fr 2rem;

  &.green {
    color: $terminal-green;
    text-shadow: 0 0 5px $terminal-green;
    border-color: $terminal-green;

    ::selection {
      background: $terminal-green;
    }

    h1,
    table > thead {
      background-color: $terminal-green;
    }

    .monitor-screen.screen-on {
      background-image: radial-gradient( rgba( $terminal-green, 0.2 ), black 120% );
    }

    .button {
      &[disabled] {
        color: darken($terminal-green, 30%);
        text-shadow: 0 0 5px darken($terminal-green, 10%);
      }

      &:focus {
        background-color: $terminal-green;
      }
    }

    .slider,
    .color-example {
      border-color: $terminal-green;
    }

    .slider::-webkit-slider-thumb {
      background: $terminal-green;
    }
  }

  &.pink {
    color: $terminal-pink;
    text-shadow: 0 0 5px $terminal-pink;
    border-color: $terminal-pink;

    ::selection {
      background: $terminal-pink;
    }

    h1,
    table > thead {
      background-color: $terminal-pink;
    }

    .monitor-screen.screen-on {
      background-image: radial-gradient( rgba( $terminal-pink, 0.2 ), black 120% );
    }

    .button {
      &[disabled] {
        color: darken($terminal-pink, 20%);
        text-shadow: 0 0 5px darken($terminal-pink, 10%);
      }

      &:focus {
        background-color: $terminal-pink;
      }
    }

    .slider,
    .color-example {
      border-color: $terminal-pink;
    }

    .slider::-webkit-slider-thumb {
      background: $terminal-pink;
    }
  }

  &.red {
    color: $terminal-red;
    text-shadow: 0 0 5px $terminal-red;
    border-color: $terminal-red;

    ::selection {
      background: $terminal-red;
    }

    h1,
    table > thead {
      background-color: $terminal-red;
    }

    .monitor-screen.screen-on {
      background-image: radial-gradient( rgba( $terminal-red, 0.4 ), black 120% );
    }

    .button {
      &[disabled] {
        color: darken($terminal-red, 10%);
        text-shadow: 0 0 5px darken($terminal-red, 10%);
      }

      &:focus {
        background-color: $terminal-red;
      }
    }

    .slider,
    .color-example {
      border-color: $terminal-red;
    }

    .slider::-webkit-slider-thumb {
      background: $terminal-red;
    }
  }

  .slider {
    background: none;
    border-style: solid;
    border-width: 1px;
  }

  .color-example {
    border-style: solid;
    border-width: 2px;
  }
}

::selection {
  color: black;
  text-shadow: none;
}

.monitor-rim {
  background-color: #292929;
  background-image: url("https://www.transparenttextures.com/patterns/brilliant.png");
  padding: 1rem .2rem;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  flex-direction: column;
  border-left: 4px solid #292929;

  * {
    margin: 5px 0;
  }

  button {
    height: 3rem;
    width: 100%;
    background-color: #4f4f4f;
    background-image: url("https://www.transparenttextures.com/patterns/brushed-alum.png");
    border: 2px solid #595959;

    &:focus {
      outline: none;
    }
  }

  .light {
    border-radius: 50%;
    height: 10px;
    width: 10px;
    border-width: 2px;
    border-style: solid;
    position: relative;
    transition: box-shadow 100ms ease-in-out, background-color 100ms ease-in-out, border-color 100ms ease-in-out;

    &.power {
      background-color: #365a0e;
      border-color: #233a09;

      &.on {
        background-color: #a2ff23;
        border-color: #578f15;
        box-shadow: 0 0 25px 5px #a2ff23;
      }
    }

    &.data {
      background-color: #916806;
      border-color: #6b4d04;

      &.on {
        background-color: #ffb70a;
        border-color: #b78308;
        box-shadow: 0 0 25px 5px #ffb70a;
      }

    }
  }
}

.monitor-screen {
  border-radius: 5px;
  background-color: black;
  position: relative;
  padding: 1rem;
  height: 100%;
  box-sizing: border-box;
  overflow: hidden;

  &.screen-on {
    background-image: radial-gradient( rgba( $terminal-green, 0.2 ), black 120% );

    .monitor-screen-content {
      animation: turn-on 4s linear;
      animation-fill-mode:forwards;
    }

    &::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient( 0deg, rgba( black, 0.55 ), rgba( black, 0.55 ) 1px, transparent 1px, transparent 2px );
      pointer-events: none;
      animation:flicker 0.15s infinite;
    }
  }

  &.screen-off {
    .monitor-screen-content {
      animation: turn-off 0.55s $ease-out-quint;
      animation-fill-mode:forwards;
    }
  }
}

.monitor-screen-content {
  height: 100%;
  box-sizing: border-box;
  display: grid;
  grid-template-areas: "child" "controls";
  grid-template-rows: 1fr auto;
}

.disconnected-content {
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.disconnected-label {
  font-size: 2rem;
  animation: blink 1500ms ease-in-out infinite;
}

.monitor-screen-content > div:first-child {
  grid-area: child;
}

.monitor-controls {
  grid-area: controls;
  display: flex;

  .monitor-color-controls {
    margin-left: auto;
  }

  .button:not(:first-child) {
    margin-left: 5px;
  }
}

.toggle-monitor-on {
  height: 38px;
  margin-left: 1rem;
}

.button {
  color: inherit;
  font-family: inherit;
  text-shadow: inherit;
  text-transform: lowercase;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;

  &::before {
    content: "[";
  }

  &::after {
    content: "]";
  }

  &.active {
    font-weight: 900;
  }

  &:focus {
    outline: none;
    color: black;
    text-shadow: 0 0 5px black;
  }
}

input {
  max-width: 100%;
  background: none;
  padding: 0;
  color: inherit;
  font-size: inherit;
  font-family: Inconsolata, monospace;
  text-shadow: inherit;
  border: none;
}

h1 {
  padding-left: .5rem;
}

h1,
table > thead {
  color: black;
  text-shadow: 0 0 5px black;
}

@keyframes blink {
  0% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

@keyframes flicker{
  $steps:20;
  @for $i from 0 through $steps{
    #{percentage($i*(1/$steps))}{
      opacity:random();
    }
  }
}

@keyframes turn-on{
  0%{
    transform:scale(1,0.8) translate3d(0,0,0);
    -webkit-filter:brightness(30);
    filter:brightness(30);
    opacity:1;
  }
  3.5%{
    transform:scale(1,0.8) translate3d(0,100%,0);
  }

  3.6%{
    transform:scale(1,0.8) translate3d(0,-100%,0);
    opacity:1;
  }

  9%{
    transform:scale(1.3,0.6) translate3d(0,100%,0);
    -webkit-filter:brightness(30);
    filter:brightness(30);
    opacity:0;
  }
  11%{
    transform:scale(1,1) translate3d(0,0,0);
    -webkit-filter:contrast(0) brightness(0) ;
    filter:contrast(0) brightness(0);
    opacity:0;
  }
  100%{
    transform:scale(1,1) translate3d(0,0,0);
    -webkit-filter:contrast(1) brightness(1.2) saturate(1.3);
    filter:contrast(1) brightness(1.2) saturate(1.3);
    opacity:1;
  }
}

@keyframes turn-off{
  0%{
    transform:scale(1,1.3) translate3d(0,0,0);
    -webkit-filter:brightness(1);
    filter:brightness(1);
    opacity:1;
  }
  60%{
    transform:scale(1.3,0.001) translate3d(0,0,0);
    -webkit-filter:brightness(10);
    filter:brightness(10);
  }
  100%{
    animation-timing-function:$ease-in-quint;
    transform:scale(0.000,0.0001) translate3d(0,0,0);
    -webkit-filter:brightness(50);
    filter:brightness(50);
  }
}
